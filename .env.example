# =============================================================================
# ASTRUXA BACKEND - VARIABLES DE ENTORNO DE EJEMPLO
# =============================================================================
# Copia este archivo a .env y ajusta los valores según tu entorno.
# NO guardes secretos reales en este archivo.

# --- 1. Configuración General de la Aplicación ---
# development | testing | production
ENV=development
PROJECT_NAME=Astruxa
# URL base pública de la API (usada para generar links, emails, etc.)
BASE_URL=http://localhost:8071
# Orígenes permitidos para CORS (separados por coma o lista JSON)
BACKEND_CORS_ORIGINS=["http://localhost:3000","http://localhost:8080"]

# --- 2. Base de Datos (PostgreSQL / TimescaleDB) ---
# Estas variables son usadas tanto por Docker Compose como por la aplicación.
POSTGRES_HOST=backend_db
POSTGRES_PORT=5432
POSTGRES_DB=astruxa_db
POSTGRES_USER=user_astruxa
POSTGRES_PASSWORD=change_this_password_in_prod

# Configuración del Pool de Conexiones (SQLAlchemy)
DATABASE_POOL_SIZE=10
DATABASE_POOL_OVERFLOW=5
DATABASE_POOL_TIMEOUT=30

# --- 3. Cache y Sesiones (Redis) ---
REDIS_HOST=redis
REDIS_PORT=6379

# --- 4. Seguridad y Autenticación ---
# ¡CRÍTICO! Genera una cadena aleatoria larga para producción: `openssl rand -hex 32`
JWT_SECRET=change_this_secret_to_something_secure_and_long
# Secreto para los tokens de restablecimiento de contraseña. ¡Debe ser diferente a JWT_SECRET!
JWT_PASSWORD_RESET_SECRET=another_different_long_secure_secret
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1080  # 18 horas

# Credenciales para el primer Super Admin (creado por seed_saas.py)
FIRST_SUPERUSER_EMAIL=admin@astruxa.com
#FIRST_SUPERUSER_PASSWORD=AstruxaAdmin2024!
FIRST_SUPERUSER_PASSWORD=admin123


SUPER_ADMIN_ROLE_NAME=GLOBAL_SUPER_ADMIN
TENANT_ADMIN_ROLE_NAME=TENANT_ADMIN

# Políticas de Contraseña y Bloqueo
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=True
PASSWORD_REQUIRE_LOWERCASE=True
PASSWORD_REQUIRE_NUMBERS=True
PASSWORD_REQUIRE_SPECIAL_CHARS=True
AUTH_MAX_LOGIN_ATTEMPTS=5
AUTH_LOCKOUT_DURATION_SECONDS=900

# --- 5. Almacenamiento de Archivos (Media Manager) ---
# Opciones: 'local' | 's3'
STORAGE_TYPE=local
# Ruta para almacenamiento local (dentro del contenedor)
STORAGE_PATH=/app/storage
# Tamaño máximo de archivo en MB
MAX_FILE_SIZE_MB=10

# Configuración S3 (Solo requerida si STORAGE_TYPE=s3)
S3_BUCKET_NAME=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_ENDPOINT_URL=

# --- 6. Email y Notificaciones (SMTP) ---
SMTP_HOST=mailpit
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
# Si usas TLS (producción), pon esto en True
SMTP_TLS=False
# Email por defecto para notificaciones del sistema
EMAILS_FROM_EMAIL=no-reply@astruxa.com
EMAILS_FROM_NAME=Astruxa System

# --- 7. Pasarelas de Pago ---
PAYPAL_CLIENT_ID=
PAYPAL_CLIENT_SECRET=
PAYPAL_WEBHOOK_ID=
# Sandbox: https://api-m.sandbox.paypal.com | Live: https://api-m.paypal.com
PAYPAL_API_BASE_URL=https://api-m.sandbox.paypal.com

# --- 8. Integraciones Externas ---
# Google Cloud (Opcional)
GOOGLE_API_KEY="AIzaSyDMJNoP1xPZCbPVbRas6U9ArZ62HhnUtM8"

# --- 9. Paginación ---
DEFAULT_PAGINATION_SKIP=0
DEFAULT_PAGINATION_LIMIT=100

# --- 10. Docker Compose (Opcional) ---
COMPOSE_PROJECT_NAME=astruxa_backend
